<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnackStation - Order Late, Eat Great</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'selector',
            theme: {
                extend: {
                    colors: {
                        'light-orange': '#FFF8F0',
                        'light-pink': '#FFF5F7',
                        'light-red': '#FFF6F4',
                        'light-purple': '#FAF8FF',
                        'dark-bg': '#1a202c',
                        'dark-card': '#2d3748',
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-header {
            background: linear-gradient(90deg, #6B46C1, #805AD5, #9F7AEA);
        }
        .dark .gradient-header {
            background: linear-gradient(90deg, #2D3748, #2A4365, #1A202C);
        }
        .item-card {
            background-color: white;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .dark .item-card {
            background-color: #2D3748;
        }
        .color-palette {
            position: fixed;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            padding: 10px;
            background-color: #fff;
            border-radius: 0 10px 10px 0;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            z-index: 40;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .dark .color-palette {
            background-color: #1a202c;
            box-shadow: 2px 0 10px rgba(255,255,255,0.1);
        }
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            margin: 5px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: border-color 0.2s ease;
        }
        .color-option.active, .color-option:hover {
            border-color: #4A5568;
        }
        .dark .color-option.active, .dark .color-option:hover {
            border-color: #E2E8F0;
        }
        @keyframes blinkBox {
            0%, 100% { box-shadow: 0 0 0px #FACC15; }
            50% { box-shadow: 0 0 20px #FACC15; }
        }
        .animate-blink {
            animation: blinkBox 1s ease-in-out infinite;
        }
    </style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9K51EXH0G9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-9K51EXH0G9');
    </script>
</head>
<body id="mainBody" class="bg-gradient-to-br from-light-orange via-light-pink to-light-purple min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100">
    <div id="announcementModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 dark:bg-opacity-70">
        <div class="bg-yellow-100 border-2 border-yellow-300 rounded-lg shadow-lg p-6 w-96 relative animate-blink dark:bg-yellow-900 dark:border-yellow-700">
            <button onclick="closeAnnouncement()" class="absolute top-2 right-2 text-yellow-800 hover:text-yellow-900 dark:text-yellow-200 dark:hover:text-yellow-100">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <h2 class="text-lg font-bold text-yellow-900 mb-2 dark:text-yellow-100">‚ö° Announcement</h2>
            <p class="text-yellow-800 font-medium dark:text-yellow-200 mb-2">
                Our operating hours are:
                <br>
                <b>Every Night:</b> 12:00 AM to 02:15 AM
                <br>
                <b>Weekends:</b> 10:00 AM - 02:00 AM (next day)
            </p>
            <p class="text-yellow-800 font-medium dark:text-yellow-200">
                We are working on payment gateways so for now please use <b>Cash on Delivery</b>.
            </p>
        </div>
    </div>
    <script>
        function closeAnnouncement() {
            document.getElementById('announcementModal').style.display = 'none';
        }
    </script>

    <header class="gradient-header text-white p-4 shadow-lg sticky top-0 z-30">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold">SnackStation</h1>
                <div class="flex items-center space-x-2 text-sm opacity-90 mt-1">
                    <span>Order Late, Eat Great</span>
                    <span class="text-xs">|</span>
                    <span>üïí Open till 2 AM</span>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button onclick="toggleDarkMode()" class="p-2 rounded-full text-gray-800 bg-gray-200 hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600">
                    <svg id="moon-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
                    <svg id="sun-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2a10 10 0 100 20 10 10 0 000-20zM12 20a8 8 0 110-16 8 8 0 010 16zM12 5a1 1 0 00-1 1v2a1 1 0 002 0V6a1 1 0 00-1-1zM19 12a1 1 0 00-1-1h-2a1 1 0 000 2h2a1 1 0 001-1zM5 12a1 1 0 00-1-1H2a1 1 0 000 2h2a1 1 0 001-1zM12 19a1 1 0 00-1 1v2a1 1 0 002 0v-2a1 1 0 00-1-1zM16.24 7.76a1 1 0 00.71-.29l1.41-1.41a1 1 0 00-1.41-1.41l-1.41 1.41a1 1 0 00.29.71zM7.76 16.24a1 1 0 00.71.29l1.41 1.41a1 1 0 00-1.41 1.41l-1.41-1.41a1 1 0 00-.29-.71zM18.36 18.36a1 1 0 00-.71.29l-1.41 1.41a1 1 0 101.41 1.41l1.41-1.41a1 1 0 00-.29-.71zM5.64 5.64a1 1 0 00-.71-.29l-1.41-1.41a1 1 0 10-1.41 1.41l1.41 1.41a1 1 0 00.71-.29z"></path>
                    </svg>
                </button>
                <div class="relative cursor-pointer text-white" onclick="toggleCart()">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9M17 21a2 2 0 100-4 2 2 0 000 4zM9 21a2 2 0 100-4 2 2 0 000 4z"></path>
                    </svg>
                    <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs">0</span>
                </div>
            </div>
        </div>
    </header>

    <div class="color-palette bg-white dark:bg-gray-800">
        <h4 class="text-sm font-semibold mb-3 text-gray-800 text-center dark:text-gray-100">Colors</h4>
        <div class="space-y-2">
            <div class="color-option active" style="background: linear-gradient(135deg, #FED7AA, #FBCFE8, #DDD6FE)" onclick="changeColorTheme('default')" title="Default"></div>
            <div class="color-option" style="background: linear-gradient(135deg, #FCA5A5, #5EEAD4)" onclick="changeColorTheme('coral')" title="Coral Ocean"></div>
            <div class="color-option" style="background: linear-gradient(135deg, #86EFAC, #FDE047, #FDBA74)" onclick="changeColorTheme('mint')" title="Mint Peach"></div>
            <div class="color-option" style="background: linear-gradient(135deg, #FCA5A5, #F9A8D4, #FDA4AF)" onclick="changeColorTheme('rose')" title="Rose Garden"></div>
            <div class="color-option" style="background: linear-gradient(135deg, #C4B5FD, #DDD6FE, #A5B4FC)" onclick="changeColorTheme('lavender')" title="Lavender Dream"></div>
            <div class="color-option" style="background: linear-gradient(135deg, #7DD3FC, #93C5FD, #86EFAC)" onclick="changeColorTheme('sky')" title="Sky Meadow"></div>
        </div>
    </div>

    <main class="container mx-auto p-6">
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white">Single Items</h2>
            <!-- MODIFICATION: Grid updated to handle 4 items -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="h-20 flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-20 h-20">
                            <rect x="10" y="10" width="80" height="80" rx="10" fill="#ffde00"/>
                            <path d="M10 20C10 14.477 14.477 10 20 10H80C85.523 10 90 14.477 90 20V40H10V20Z" fill="#d9232d"/>
                            <text x="50" y="30" font-family="Arial, sans-serif" font-size="16" fill="white" font-weight="bold" text-anchor="middle">Maggi</text>
                            <circle cx="50" cy="65" r="20" fill="#d9232d"/>
                            <circle cx="50" cy="65" r="18" fill="#ffde00" stroke="#f3a32c" stroke-width="2"/>
                            <path d="M40 62 C 45 58, 50 64, 55 60 S 65 58, 60 65" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                            <path d="M42 68 C 47 64, 52 70, 57 66 S 67 64, 62 71" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Maggi Packet</h3>
                    <p id="maggi-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ30</p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('maggi', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="maggi-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">2</span>
                        <button onclick="changeQuantity('maggi', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Maggi Packet', 15, 'maggi')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Maggi Packet', 15, 'maggi')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="text-6xl text-center mb-4 h-20 flex items-center justify-center">üå∂Ô∏è</div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Takatak</h3>
                    <p id="kurkure-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ35</p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('kurkure', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="kurkure-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('kurkure', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Takatak', 35, 'kurkure')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Takatak', 35, 'kurkure')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="text-6xl text-center mb-4 h-20 flex items-center justify-center">ü•îü•î</div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Lays</h3>
                    <p id="lays-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ35</p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('lays', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="lays-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('lays', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Lays', 35, 'lays')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Lays', 35, 'lays')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- NEW ITEM: Burban Biscuit -->
                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="text-6xl text-center mb-4 h-20 flex items-center justify-center">üç™</div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Burban Biscuit</h3>
                    <p id="burban-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ20</p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('burban', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="burban-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('burban', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Burban Biscuit', 20, 'burban')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Burban Biscuit', 20, 'burban')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white">Combo Packs</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="h-16 flex items-center justify-center space-x-2 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-12 h-12">
                            <rect x="10" y="10" width="80" height="80" rx="10" fill="#ffde00"/>
                            <path d="M10 20C10 14.477 14.477 10 20 10H80C85.523 10 90 14.477 90 20V40H10V20Z" fill="#d9232d"/>
                            <text x="50" y="30" font-family="Arial, sans-serif" font-size="16" fill="white" font-weight="bold" text-anchor="middle">Maggi</text>
                            <circle cx="50" cy="65" r="20" fill="#d9232d"/>
                            <circle cx="50" cy="65" r="18" fill="#ffde00" stroke="#f3a32c" stroke-width="2"/>
                            <path d="M40 62 C 45 58, 50 64, 55 60 S 65 58, 60 65" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                            <path d="M42 68 C 47 64, 52 70, 57 66 S 67 64, 62 71" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                        </svg>
                        <span class="text-4xl">+</span>
                        <span class="text-4xl">üå∂Ô∏è</span>
                    </div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Maggi Packet + Takatak</h3>
                    <p id="combo1-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ45 <span class="text-sm text-green-500">(Save 5 rs)</span></p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('combo1', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="combo1-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('combo1', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Maggi Packet + Takatak', 45, 'combo1')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Maggi Packet + Takatak', 45, 'combo1')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="h-16 flex items-center justify-center space-x-2 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-12 h-12">
                            <rect x="10" y="10" width="80" height="80" rx="10" fill="#ffde00"/>
                            <path d="M10 20C10 14.477 14.477 10 20 10H80C85.523 10 90 14.477 90 20V40H10V20Z" fill="#d9232d"/>
                            <text x="50" y="30" font-family="Arial, sans-serif" font-size="16" fill="white" font-weight="bold" text-anchor="middle">Maggi</text>
                            <circle cx="50" cy="65" r="20" fill="#d9232d"/>
                            <circle cx="50" cy="65" r="18" fill="#ffde00" stroke="#f3a32c" stroke-width="2"/>
                            <path d="M40 62 C 45 58, 50 64, 55 60 S 65 58, 60 65" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                            <path d="M42 68 C 47 64, 52 70, 57 66 S 67 64, 62 71" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                        </svg>
                        <span class="text-4xl">+</span>
                        <span class="text-4xl">ü•îü•î</span>
                    </div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Maggi Packet + Lays</h3>
                    <p id="combo2-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ45 <span class="text-sm text-green-500">(Save 5 rs)</span></p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('combo2', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="combo2-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('combo2', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Maggi Packet + Lays', 45, 'combo2')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Maggi Packet + Lays', 45, 'combo2')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="text-4xl text-center mb-4 h-16 flex items-center justify-center">üå∂Ô∏è + ü•îü•î</div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Takatak + Lays</h3>
                    <p id="combo3-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ60 <span class="text-sm text-green-500">(Save 10 rs)</span></p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('combo3', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="combo3-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('combo3', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Takatak + Lays', 60, 'combo3')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Takatak + Lays', 60, 'combo3')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- NEW COMBO: Maggi + Burban -->
                <div class="item-card rounded-xl p-6 shadow-lg bg-white dark:bg-gray-800">
                    <div class="h-16 flex items-center justify-center space-x-2 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-12 h-12">
                            <rect x="10" y="10" width="80" height="80" rx="10" fill="#ffde00"/>
                            <path d="M10 20C10 14.477 14.477 10 20 10H80C85.523 10 90 14.477 90 20V40H10V20Z" fill="#d9232d"/>
                            <text x="50" y="30" font-family="Arial, sans-serif" font-size="16" fill="white" font-weight="bold" text-anchor="middle">Maggi</text>
                            <circle cx="50" cy="65" r="20" fill="#d9232d"/>
                            <circle cx="50" cy="65" r="18" fill="#ffde00" stroke="#f3a32c" stroke-width="2"/>
                            <path d="M40 62 C 45 58, 50 64, 55 60 S 65 58, 60 65" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                            <path d="M42 68 C 47 64, 52 70, 57 66 S 67 64, 62 71" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                        </svg>
                        <span class="text-4xl">+</span>
                        <span class="text-4xl">üç™</span>
                    </div>
                    <h3 class="text-xl font-bold text-center mb-2 text-gray-800 dark:text-white">Maggi Packet + Burban</h3>
                    <p id="combo4-price" class="text-2xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ35</p>
                    <div class="flex items-center justify-center mb-4">
                        <button onclick="changeQuantity('combo4', -1)" class="bg-red-500 text-white w-8 h-8 rounded-full hover:bg-red-600 transition-colors">-</button>
                        <span id="combo4-qty" class="mx-4 text-lg font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('combo4', 1)" class="bg-green-500 text-white w-8 h-8 rounded-full hover:bg-green-600 transition-colors">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Maggi Packet + Burban', 35, 'combo4')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold flex items-center justify-center">
                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Maggi Packet + Burban', 35, 'combo4')" class="bg-gray-500 text-white py-2 px-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800 dark:text-white">Ultimate Combo</h2>
            <div class="flex justify-center">
                <div class="item-card rounded-xl p-8 shadow-lg max-w-md w-full bg-white dark:bg-gray-800">
                    <div class="h-16 flex items-center justify-center space-x-2 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-12 h-12">
                            <rect x="10" y="10" width="80" height="80" rx="10" fill="#ffde00"/>
                            <path d="M10 20C10 14.477 14.477 10 20 10H80C85.523 10 90 14.477 90 20V40H10V20Z" fill="#d9232d"/>
                            <text x="50" y="30" font-family="Arial, sans-serif" font-size="16" fill="white" font-weight="bold" text-anchor="middle">Maggi</text>
                            <circle cx="50" cy="65" r="20" fill="#d9232d"/>
                            <circle cx="50" cy="65" r="18" fill="#ffde00" stroke="#f3a32c" stroke-width="2"/>
                            <path d="M40 62 C 45 58, 50 64, 55 60 S 65 58, 60 65" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                            <path d="M42 68 C 47 64, 52 70, 57 66 S 67 64, 62 71" stroke="#f3a32c" stroke-width="3" fill="none" stroke-linecap="round"/>
                        </svg>
                        <span class="text-4xl">+</span>
                        <span class="text-4xl">üå∂Ô∏è</span>
                        <span class="text-4xl">+</span>
                        <span class="text-4xl">ü•îü•î</span>
                    </div>
                    <h3 class="text-2xl font-bold text-center mb-2 text-gray-800 dark:text-white">Maggi Packet + Takatak + Lays</h3>
                    <p id="ultimate-price" class="text-3xl font-bold text-center text-blue-600 mb-4 dark:text-blue-400">‚Çπ75 <span class="text-sm text-green-500">(Save 10 rs)</span></p>
                    <div class="flex items-center justify-center mb-6">
                        <button onclick="changeQuantity('ultimate', -1)" class="bg-red-500 text-white w-10 h-10 rounded-full hover:bg-red-600 transition-colors text-lg">-</button>
                        <span id="ultimate-qty" class="mx-6 text-xl font-semibold text-gray-800 dark:text-gray-200">1</span>
                        <button onclick="changeQuantity('ultimate', 1)" class="bg-green-500 text-white w-10 h-10 rounded-full hover:bg-green-600 transition-colors text-lg">+</button>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="buyNow('Maggi Packet + Takatak + Lays', 75, 'ultimate')" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold text-lg flex items-center justify-center">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                            Buy Now
                        </button>
                        <button onclick="addToCart('Maggi Packet + Takatak + Lays', 75, 'ultimate')" class="bg-gray-500 text-white py-3 px-4 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="cartSidebar" class="fixed right-0 top-0 h-full w-80 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50 dark:bg-gray-800">
        <div class="p-6 flex flex-col h-full">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800 dark:text-white">Your Cart</h3>
                <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="cartItems" class="space-y-4 mb-6 flex-grow overflow-y-auto">
                <p class="text-gray-500 text-center dark:text-gray-400">Your cart is empty</p>
            </div>
            <div id="cartTotal" class="border-t pt-4 mb-4 hidden dark:border-gray-700">
                <div class="flex justify-between items-center">
                    <span class="text-lg font-semibold text-gray-800 dark:text-white">Total: </span>
                    <span id="totalAmount" class="text-lg font-bold text-blue-600 dark:text-blue-400">‚Çπ0</span>
                </div>
            </div>
            <button id="checkoutBtn" onclick="openOrderModal()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold hidden">
                Checkout Cart
            </button>
        </div>
    </div>

    <div id="orderModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4 dark:bg-opacity-70">
        <div class="bg-white rounded-xl p-8 max-w-md w-full max-h-screen overflow-y-auto dark:bg-gray-800">
            <h3 class="text-2xl font-bold mb-6 text-center text-gray-800 dark:text-white">Order Details</h3>
            
            <form id="orderForm">
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Name</label>
                    <input type="text" id="customerName" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Hostel Name</label>
                    <select id="hostelName" name="hostelName" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="" disabled selected>Select your hostel</option>
                        <option value="Zakir A">Zakir A</option>
                        <option value="Zakir B">Zakir B</option>
                        <option value="Zakir C">Zakir C</option>
                        <option value="Zakir D">Zakir D</option>
                        <option value="NC1">NC1</option>
                        <option value="NC2">NC2</option>
                        <option value="NC3">NC3</option>
                        <option value="NC4">NC4</option>
                        <option value="NC5">NC5</option>
                        <option value="NC6">NC6</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Room Number</label>
                    <input type="text" id="roomNumber" inputmode="numeric" pattern="\d*" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Phone Number</label>
                    <input type="tel" id="phoneNumber" inputmode="numeric" pattern="\d*" required class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Order Summary</label>
                    <div id="orderSummary" class="p-3 bg-gray-100 rounded-lg text-gray-800 dark:bg-gray-700 dark:text-white"></div>
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300">Payment Method</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="paymentMethod" value="online" checked class="mr-2" onchange="toggleQRDisplay()">
                            <span class="text-gray-700 dark:text-gray-300">Online Payment (PhonePe)</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="paymentMethod" value="cash" class="mr-2" onchange="toggleQRDisplay()">
                            <span class="text-gray-700 dark:text-gray-300">Cash on Delivery</span>
                        </label>
                    </div>
                    <div id="qr-display" class="mt-4 text-center">
                        <div id="qr-code-container" class="hidden">
                            <p class="text-sm text-gray-600 mb-2 dark:text-gray-400">Scan to pay:</p>
                            <img id="payment-qr-image" src="" class="w-48 h-48 object-cover rounded-lg mx-auto border-2 border-gray-300 dark:border-gray-600" alt="PhonePe QR Code">
                        </div>
                        <p id="no-qr-message" class="hidden text-sm text-red-500">No QR code uploaded yet!</p>
                    </div>
                </div>
                
                <div class="flex space-x-4">
                    <button type="button" onclick="closeOrderModal()" class="flex-1 bg-gray-500 text-white py-3 rounded-lg hover:bg-gray-600 transition-colors">Cancel</button>
                    <button type="button" onclick="handleOrderSubmission()" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold">Place Order</button>
                </div>
            </form>
        </div>
    </div>

    <!-- NEW: Terms and Conditions Modal -->
    <div id="termsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4 dark:bg-opacity-70">
        <div class="bg-white rounded-xl p-8 max-w-2xl w-full max-h-[90vh] flex flex-col dark:bg-gray-800">
            <div class="flex justify-between items-center mb-6 flex-shrink-0">
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white">Terms and Conditions</h3>
                <button onclick="closeTermsModal()" class="text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-100">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="prose dark:prose-invert max-w-none overflow-y-auto text-gray-700 dark:text-gray-300">
                <p class="text-sm">Last updated: August 29, 2025</p>
                <p>Please read these Terms and Conditions ("Terms") carefully before using the SnackStation website (the "Service"). Your access to and use of the Service is conditioned upon your acceptance of and compliance with these Terms. These Terms apply to all visitors, users, and others who wish to access or use the Service.</p>
                
                <h4>1. Service Description</h4>
                <p>SnackStation provides a late-night snack delivery service to specific locations (hostels) as listed on the order form. Our operating hours are clearly mentioned on the website.</p>

                <h4>2. Orders</h4>
                <p>By placing an order through our website, you warrant that you are legally capable of entering into binding contracts. All orders are subject to availability. The final order confirmation is communicated via WhatsApp.</p>

                <h4>3. Payment</h4>
                <p>We currently offer two payment methods: Cash on Delivery and Online Payment via PhonePe. Payment must be made in full at the time of delivery (for COD) or before placing the order (for Online Payment). Prices are as listed on the website at the time of ordering.</p>

                <h4>4. Delivery</h4>
                <p>Our delivery service is restricted to the hostel locations specified in the order form. We will make every effort to deliver your order within a reasonable time, but delivery times are not guaranteed. It is your responsibility to be available to receive the delivery at the specified room number and provide accurate contact details.</p>

                <h4>5. Cancellations and Refunds</h4>
                <p>Once an order is confirmed via WhatsApp, it cannot be cancelled. Due to the perishable nature of our products, we do not offer refunds or exchanges. If you receive an incorrect or damaged item, please contact us immediately via the WhatsApp number used for order confirmation to resolve the issue.</p>

                <h4>6. User Conduct</h4>
                <p>You agree not to misuse the Service. You are responsible for providing accurate and current information for your order, including name, hostel, room number, and phone number. Any misuse may result in refusal of service.</p>

                <h4>7. Limitation of Liability</h4>
                <p>To the maximum extent permitted by law, SnackStation shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits or revenues, whether incurred directly or indirectly.</p>

                <h4>8. Changes to Terms</h4>
                <p>We reserve the right, at our sole discretion, to modify or replace these Terms at any time. We will provide notice of any changes by posting the new Terms on this site.</p>

                <h4>9. Contact Us</h4>
                <p>If you have any questions about these Terms, please contact us at the number provided for WhatsApp orders: +91 6205574746.</p>
            </div>
        </div>
    </div>

    <footer class="gradient-header text-white text-center py-6 mt-12 dark:bg-gray-800 dark:text-gray-100">
        <p class="text-lg font-semibold">Powered by SnackStation</p>
        <!-- NEW: Link to open Terms and Conditions -->
        <div class="mt-2">
            <a href="#" onclick="openTermsModal(); return false;" class="text-sm opacity-80 hover:opacity-100 underline">Terms & Conditions</a>
        </div>
    </footer>

    <script>
        // Data structure to hold the state of the app
        const items = {
            // MODIFICATION: Default quantity for maggi is now 2
            'maggi': { name: 'Maggi Packet', price: 15, qty: 2, stock: 'high' },
            'kurkure': { name: 'Takatak', price: 35, qty: 1, stock: 'medium' },
            'lays': { name: 'Lays', price: 35, qty: 1, stock: 'low' },
            'burban': { name: 'Burban Biscuit', price: 20, qty: 1, stock: 'high' }, // NEW
            'combo1': { name: 'Maggi Packet + Takatak', price: 45, qty: 1, stock: 'high' },
            'combo2': { name: 'Maggi Packet + Lays', price: 45, qty: 1, stock: 'high' },
            'combo3': { name: 'Takatak + Lays', price: 60, qty: 1, stock: 'high' },
            'combo4': { name: 'Maggi Packet + Burban', price: 35, qty: 1, stock: 'high' }, // NEW
            'ultimate': { name: 'Maggi Packet + Takatak + Lays', price: 75, qty: 1, stock: 'high' },
        };
        let cart = [];

        // MODIFICATION: Function to reset a card's quantity and price to its default state
        function resetCard(itemId) {
            const qtyElement = document.getElementById(`${itemId}-qty`);
            const priceElement = document.getElementById(`${itemId}-price`);
            
            if (!qtyElement || !priceElement) return;

            const basePrice = items[itemId].price;
            // Maggi resets to 2, others to 1
            const defaultQty = (itemId === 'maggi') ? 2 : 1;

            items[itemId].qty = defaultQty;
            qtyElement.innerText = defaultQty;

            const newPrice = basePrice * defaultQty;

            if (priceElement.innerHTML.includes("span")) {
                // For combos, reset to the base combo price
                priceElement.innerHTML = `‚Çπ${basePrice} <span class="text-sm text-green-500">${priceElement.querySelector('span').innerText}</span>`;
            } else {
                // For single items, show the price for the default quantity
                priceElement.innerText = `‚Çπ${newPrice}`;
            }
        }

        // MODIFICATION: Function to update the quantity and enforce minimums
        function changeQuantity(itemId, change) {
            const qtyElement = document.getElementById(`${itemId}-qty`);
            const priceElement = document.getElementById(`${itemId}-price`);
            
            if (!qtyElement || !priceElement) return;

            const basePrice = items[itemId].price;
            let currentQty = parseInt(qtyElement.innerText);
            currentQty += change;

            // Enforce minimum quantity: 2 for maggi, 1 for others
            const minQty = (itemId === 'maggi') ? 2 : 1;
            if (currentQty < minQty) {
                currentQty = minQty;
            }

            items[itemId].qty = currentQty;
            qtyElement.innerText = currentQty;

            const newPrice = basePrice * currentQty;
            if (priceElement.innerHTML.includes("span")) {
                priceElement.innerHTML = `‚Çπ${newPrice} <span class="text-sm text-green-500">${priceElement.querySelector('span').innerText}</span>`;
            } else {
                priceElement.innerText = `‚Çπ${newPrice}`;
            }
        }

        // Function to add an item to the cart
        function addToCart(itemName, itemPrice, itemId) {
            const existingItemIndex = cart.findIndex(item => item.name === itemName);
            const qty = items[itemId].qty;

            if (existingItemIndex > -1) {
                // If item exists, update its quantity
                cart[existingItemIndex].qty += qty;
            } else {
                // Otherwise, add it as a new item
                cart.push({ id: itemId, name: itemName, price: itemPrice, qty: qty });
            }

            updateCartDisplay();
            toggleCart();
            resetCard(itemId);
        }
        
        // Function to change quantity from within the cart
        function changeCartItemQuantity(index, change) {
            cart[index].qty += change;
            if (cart[index].qty <= 0) {
                cart.splice(index, 1); // Remove item if quantity is 0 or less
            }
            updateCartDisplay();
        }


        // Function to handle Buy Now action
        function buyNow(itemName, itemPrice, itemId) {
            cart = [{ id: itemId, name: itemName, price: itemPrice, qty: items[itemId].qty }];
            openOrderModal();
            resetCard(itemId);
        }

        // Function to update the cart sidebar content
        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartTotalContainer = document.getElementById('cartTotal');
            const totalAmountElement = document.getElementById('totalAmount');
            const checkoutBtn = document.getElementById('checkoutBtn');
            let total = 0;
            let totalQty = 0;

            cartItemsContainer.innerHTML = '';
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500 text-center dark:text-gray-400">Your cart is empty</p>';
                cartTotalContainer.classList.add('hidden');
                checkoutBtn.classList.add('hidden');
            } else {
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.qty;
                    total += itemTotal;
                    totalQty += item.qty;
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'flex justify-between items-center bg-gray-100 p-3 rounded-lg dark:bg-gray-700';
                    itemDiv.innerHTML = `
                        <div class="flex-1 mr-2">
                            <h4 class="font-semibold text-gray-800 dark:text-white text-sm">${item.name}</h4>
                            <p class="text-xs text-gray-600 dark:text-gray-400">‚Çπ${item.price} x ${item.qty} = ‚Çπ${itemTotal}</p>
                        </div>
                        <div class="flex items-center">
                            <button onclick="changeCartItemQuantity(${index}, -1)" class="bg-red-500 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center">-</button>
                            <span class="mx-2 font-semibold text-sm">${item.qty}</span>
                            <button onclick="changeCartItemQuantity(${index}, 1)" class="bg-green-500 text-white w-6 h-6 rounded-full text-xs flex items-center justify-center">+</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(itemDiv);
                });

                totalAmountElement.innerText = `‚Çπ${total}`;
                cartTotalContainer.classList.remove('hidden');
                checkoutBtn.classList.remove('hidden');
            }
            document.getElementById('cartCount').innerText = totalQty;
        }
        
        // Function to open the order modal
        function openOrderModal() {
            const modal = document.getElementById('orderModal');
            const summary = document.getElementById('orderSummary');
            let summaryHTML = '<ul>';
            let total = 0;

            cart.forEach(item => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;
                summaryHTML += `<li class="mb-1">${item.name} x ${item.qty} = ‚Çπ${itemTotal}</li>`;
            });
            summaryHTML += `<li class="font-bold border-t border-gray-300 mt-2 pt-2 dark:border-gray-600">Total: ‚Çπ${total}</li>`;
            summaryHTML += '</ul>';
            summary.innerHTML = summaryHTML;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // Function to close the order modal
        function closeOrderModal() {
            const modal = document.getElementById('orderModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // Gathers form data and redirects to WhatsApp
        function handleOrderSubmission() {
            const name = document.getElementById('customerName').value;
            const hostel = document.getElementById('hostelName').value;
            const room = document.getElementById('roomNumber').value;
            const phone = document.getElementById('phoneNumber').value;
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;

            if (!name || !hostel || !room || !phone) {
                // A simple custom message box can be used instead of alert
                // For now, we'll keep it simple.
                console.error('Please fill out all the details!');
                return;
            }
            
            let message = "Hi SnackStation, I would like to place an order.\n\n";
            
            message += "*Customer Details:*\n";
            message += `Name: ${name}\n`;
            message += `Hostel: ${hostel}\n`;
            message += `Room No: ${room}\n`;
            message += `Phone: ${phone}\n\n`;
            
            message += "*Order Details:*\n";
            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;
                message += `- ${item.name} (x${item.qty}) = ‚Çπ${itemTotal}\n`;
            });
            
            message += `\n*Total Amount:* ‚Çπ${total}\n`;
            message += `*Payment Method:* ${paymentMethod === 'online' ? 'Online Payment (PhonePe)' : 'Cash on Delivery'}\n\n`;
            
            message += "Please confirm my order and let me know the estimated delivery time.";
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/916205574746?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
            
            closeOrderModal();
            cart = [];
            updateCartDisplay();
        }

        // Function to toggle the QR code display
        function toggleQRDisplay() {
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            const qrContainer = document.getElementById('qr-code-container');
            const noQrMessage = document.getElementById('no-qr-message');
            const qrImage = document.getElementById('payment-qr-image');

            if (paymentMethod === 'online') {
                const mockQRCodeURL = "https://i.ibb.co/6P0D63R/phonepe-qr.jpg";
                qrImage.src = mockQRCodeURL;
                qrContainer.classList.remove('hidden');
                noQrMessage.classList.add('hidden');
            } else {
                qrContainer.classList.add('hidden');
                noQrMessage.classList.add('hidden');
            }
        }
        
        // Function to toggle the cart sidebar
        function toggleCart() {
            const cartSidebar = document.getElementById('cartSidebar');
            cartSidebar.classList.toggle('translate-x-full');
        }
        
        // NEW: Function to open the Terms and Conditions modal
        function openTermsModal() {
            const modal = document.getElementById('termsModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        // NEW: Function to close the Terms and Conditions modal
        function closeTermsModal() {
            const modal = document.getElementById('termsModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }


        // Function to change the color theme
        function changeColorTheme(themeName) {
            const body = document.getElementById('mainBody');
            const colorOptions = document.querySelectorAll('.color-option');
            
            colorOptions.forEach(option => option.classList.remove('active'));

            const clickedOption = document.querySelector(`[onclick*="changeColorTheme('${themeName}')"]`);
            if (clickedOption) {
                clickedOption.classList.add('active');
            }

            switch(themeName) {
                case 'default':
                    body.className = 'bg-gradient-to-br from-light-orange via-light-pink to-light-purple min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
                    break;
                case 'coral':
                    body.className = 'bg-gradient-to-br from-[#FCA5A5] via-[#FCA5A5] to-[#5EEAD4] min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
                    break;
                case 'mint':
                    body.className = 'bg-gradient-to-br from-[#86EFAC] via-[#FDE047] to-[#FDBA74] min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
                    break;
                case 'rose':
                    body.className = 'bg-gradient-to-br from-[#FCA5A5] via-[#F9A8D4] to-[#FDA4AF] min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
                    break;
                case 'lavender':
                    body.className = 'bg-gradient-to-br from-[#C4B5FD] via-[#DDD6FE] to-[#A5B4FC] min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
                    break;
                case 'sky':
                    body.className = 'bg-gradient-to-br from-[#7DD3FC] via-[#93C5FD] to-[#86EFAC] min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
                    break;
                default:
                    body.className = 'bg-gradient-to-br from-light-orange via-light-pink to-light-purple min-h-screen transition-colors duration-300 dark:bg-gray-900 dark:from-gray-900 dark:to-gray-800 dark:text-gray-100';
            }
        }

        // Dark Mode Toggle Script
        function toggleDarkMode() {
            const html = document.documentElement;
            html.classList.toggle('dark');
            const isDark = html.classList.contains('dark');
            
            document.getElementById('moon-icon').classList.toggle('hidden', isDark);
            document.getElementById('sun-icon').classList.toggle('hidden', !isDark);

            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        // Check local storage on page load to apply the saved theme
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
                document.getElementById('moon-icon').classList.add('hidden');
                document.getElementById('sun-icon').classList.remove('hidden');
            } else {
                document.documentElement.classList.remove('dark');
                document.getElementById('moon-icon').classList.remove('hidden');
                document.getElementById('sun-icon').classList.add('hidden');
            }
            
            // Initialize the QR code display based on the default payment method
            toggleQRDisplay();
        });
    </script>
</body>
</html>
